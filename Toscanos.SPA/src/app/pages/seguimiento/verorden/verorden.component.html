

  <h2 class="page-head-title"> Detalle de la Orden de Trabajo</h2>
  <div class="light-font">
  <nav aria-label="breadcrumb" role="navigation">
    <ol class="breadcrumb primary-color">
      <li class="breadcrumb-item active">Ciclo de vida de la orden de transporte</li>
    </ol>
  </nav>
</div>


          <div class="main-content container-fluid">

            <div class="card card-border-color card-border-color-danger">
                <div class="card-header">
                    <b> Bitácora  </b>  
                  </div>
                  
                <div class="row">
                  <div class="col-md-8">
                      <button class="btn-buttons btn-primary" (click)="volver()"  type="button">  Regresar </button>  
                  </div>
              </div>
              <div class="card-body">
                <div class="col-12"> 
              
                   <div  class="example-container mat-elevation-z8">
                     <p-table [columns]="cols" [value]="incidencias" [resizableColumns]="true" selectionMode="single" >
                               <ng-template pTemplate="header" let-columns>
                           <tr>
                               <th [ngStyle]="{'width': col.width}" *ngFor="let col of columns" pResizableColumn [pSortableColumn]="col.field">
                                   {{col.header}}
                                   <p-sortIcon [field]="col.field" ariaLabel="Activate to sort" ariaLabelDesc="Activate to sort in descending order" ariaLabelAsc="Activate to sort in ascending order"></p-sortIcon>
                               </th>
                           </tr>
                       </ng-template>
                       <ng-template pTemplate="body" let-rowData let-columns="columns">
                           <tr [pSelectableRow]="rowData">                            
                             <td class="ui-resizable-column"> {{rowData.fecha_incidencia  | date: 'dd/MM/yyyy hh:mm'}}</td>
                             <td class="ui-resizable-column"> {{rowData.incidencia}}</td>
                             <td class="ui-resizable-column"> {{rowData.observacion}}</td>
                             <td class="ui-resizable-column"> {{rowData.usuario_registro}}</td>
                             <td class="ui-resizable-column">  
                              <div class="ui-inputgroup">
                                <button class="ui-button-secondary" *ngIf="this.escliente ==='false'" type="button"  pButton  (click)="editIncidencia(rowData.id)" icon="fa fa-edit"></button>
                              </div>
                             </td>
                           </tr>
                       </ng-template>
                   </p-table>  
                   </div>
               </div>
             </div>
            </div>
           
 
            <div class="card card-border-color card-border-color-danger">
              <div class="card-header">
                Fotos 
              </div>
              <div class="card-body">
                <div class="col-8"> 
                <div  class="example-container mat-elevation-z8">
             
                </div>
                  <div class="col-12"> 
                    <p-table [columns]="cols2" [style]="{width:'30%'}"  [value]="documentos" [resizableColumns]="true" selectionMode="single" >
                              <ng-template pTemplate="header" let-columns>
                          <tr>
                              <th [ngStyle]="{'width': col.width}" *ngFor="let col of columns" pResizableColumn [pSortableColumn]="col.field">
                                  {{col.header}}
                                  <p-sortIcon [field]="col.field" ariaLabel="Activate to sort" ariaLabelDesc="Activate to sort in descending order" ariaLabelAsc="Activate to sort in ascending order"></p-sortIcon>
                              </th>
                          </tr>
                      </ng-template>
                        
                      <ng-template pTemplate="body" let-rowData let-columns="columns">
                          <tr [pSelectableRow]="rowData">
                              <td class="ui-resizable-column"> {{rowData.nombre}}</td>
                              <td class="ui-resizable-column"> 
                                <button class="ui-button-primary" type="button"  pButton  (click)="downloadFile(rowData.id);  " icon="fa fa-cloud-download"></button>
                                <button *ngIf="this.escliente == 'false'" class="ui-button-danger" type="button"  pButton  (click)="deleteFile(rowData.id);  " icon="fa fa-trash"></button>
                              </td>
                          </tr>
                      </ng-template>
                  </p-table>  
                </div>
              </div>
    
             </div>
           </div>
            
      
           </div>

           <div class="card card-border-color card-border-color-primary">
            <div class="card-body">      
        
                <input type="file" #file name="image" class="btn btn-block  btn-s col-sm-8"  />
                <button type="button"  class="btn btn-success btn-s"
                  (click)="uploadFile(file.files)" >
                          <span class="glyphicon glyphicon-upload"></span> Subir 
                     </button>
                    
            
             </div>
          </div>
       
            <div class="be-content">
              <div class="page-head">
                <h2 class="page-head-title">Geolocalización</h2>
                <nav aria-label="breadcrumb" role="navigation">
                  <ol class="breadcrumb page-head-nav">
                    <li class="breadcrumb-item active">Google Maps</li>
                  </ol>
                </nav>
              </div>
              <div class="main-content container-fluid">
                <div class="row">
                  <div class="col-lg-12">
                    <div class="card">
                      <div class="card-body">
                        
                        <agm-map [latitude]="lat"   [longitude]="lng" [zoom]="zoom">
                          <agm-marker #maker [latitude]="lat"  
                        
                            [iconUrl]="{
                              url: '/assets/img/27-512.png',
                              scaledSize: {
                                  width: 30,
                                  height: 30
                              }
                          }"
                          [longitude]="lng"></agm-marker>
                        </agm-map>
                      </div>
                    </div>
                  </div>
             
                </div>
             
              </div>
            </div>
            <p-confirmDialog acceptLabel="Si" rejectLabel="No" [style]="{ width: '30vw'}">
    
            </p-confirmDialog>
          
          